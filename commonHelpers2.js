import{b as d,l as g,r as k,a as h,n as q}from"./assets/api-41ec3c4a.js";import"./assets/vendor-db25513e.js";const u=async e=>{const t=document.querySelector(".modal-wrapper"),a=document.querySelector(".modal-icons-list"),s=document.querySelector(".modal-window");try{const o=await d.getBookDescription(e);t.innerHTML="",a.innerHTML="";const n=`
      <img class="modal-img-book" src="${o.book_image}" alt="book" />
      <ul class="modal-description-list">
      <li><p class="modal-description-list-title">${o.title}</p></li>
      <li><p class="modal-description-list-subtitle">${o.author}</p></li>
      <li>
        <p class="modal-description-list-text">
          ${o.description}
        </p>
      </li>
      </ul>`;if(t.insertAdjacentHTML("beforeend",n),o.description===""){const c=document.querySelector(".modal-description-list-text");c.textContent="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "}const l=`<li>
        <a class="modal-icon amazon" href="${o.buy_links[0].url}"><img class='modal-icon' src="./img/amazon.png" alt="" width='62' height='19' 
       /></a>
      </li>
      <li>
        <a class="modal-icon" href="${o.buy_links[1].url}"><img class='modal-icon' src="./img/applebook.png" alt="" width='33' height='32'
       /></a>
      </li>`;a.insertAdjacentHTML("beforeend",l);let r=document.querySelector(".modal-btn-add");const m={_id:o._id,title:o.title,author:o.author,list_name:o.list_name,book_image:o.book_image,description:o.description,amazon_buy_link:o.buy_links[0].url,apple_buy_link:o.buy_links[1].url};if(g.isBookExsist(o._id)){let i=function(){g.removeBookFromFavorites(o._id),r.textContent="add to shopping list",r.classList.remove("modal-btn-remove"),r.removeEventListener("click",i),u(o._id)};r.textContent="remove from the shopping list";const c=`<p class="modal-text-congratulations">
      Ð¡ongratulations! You have added the book to the shopping list. To delete,
      press the button "Remove from the shopping list".
    </p>`;s.insertAdjacentHTML("beforeend",c),r.addEventListener("click",i)}else{let i=function(){g.addBookToFavorites(m),r.textContent="remove from the shopping list",r.classList.add("modal-btn-remove"),r.removeEventListener("click",i),u(o._id)};r.textContent="add to shopping list",r.addEventListener("click",i);const c=document.querySelector(".modal-text-congratulations");c!==null&&c.remove()}}catch(o){console.log("Error fetching modal:",o)}},L=document.querySelector(".backdrop"),C=document.querySelector(".modal-close"),f=document.querySelector("body");C.addEventListener("click",()=>{L.classList.remove("is-open"),f.classList.remove("no-scroll")});function v(){L.classList.add("is-open"),f.classList.add("no-scroll")}function S(e,t){b();try{const a=document.querySelector(".bestsellers-container");a.innerHTML="",k(".bestsellers-container",t),a.insertAdjacentHTML("beforeend",'<ul class = "book-category-list"></ul>');const s=document.querySelector(".book-category-list"),o=e.map(({author:n,book_image:l,title:r,_id:m})=>h({author:n,book_image:l,title:r,_id:m})).join("");s.innerHTML=o,s.addEventListener("click",T)}catch{console.log("Error fetching modal:",error)}finally{p()}}async function T(e){if(e.target.nodeName==="IMG"||e.target.nodeName==="H3"||e.target.nodeName==="P"){let t=e.target.closest(".book-category-item").dataset.id;u(t),v()}}async function B(){b();try{const e=await d.getBestSellers();w(e)}catch(e){console.error("Error fetching best sellers:",e)}finally{p()}}function w(e){const t=document.querySelector(".bestsellers-container");t.innerHTML="",k(".bestsellers-container","Best Sellers Books"),t.insertAdjacentHTML("beforeend",'<ul class="bestsellers-list"></ul>');const a=document.querySelector(".bestsellers-list"),s=e.map(({books:n,list_name:l})=>`<li class="bestsellers-item">
              <h2 class="bestsellers-category-title">${l}</h2>
              <ul class="bestsellers-books-list"> 
                ${n.map(({title:r,author:m,book_image:c,_id:i})=>h({title:r,author:m,book_image:c,_id:i})).join(`
`)}
              </ul>
              <button class="bestsellers-btn" type="button" data-category="${l}">See more</button>
            </li>`).join(`
`);a.insertAdjacentHTML("beforeend",s);const o=document.querySelector(".bestsellers-list");o.addEventListener("click",_),o.addEventListener("click",E)}async function E(e){if(e.preventDefault(),e.target.nodeName==="IMG"||e.target.nodeName==="H3"||e.target.nodeName==="P"){let t=e.target.closest(".book-category-item").dataset.id;u(t),v()}}async function _(e){try{if(e.target.nodeName!=="BUTTON")return;let t=e.target.dataset.category;const a=document.querySelector(".sidebar-category-item");document.querySelectorAll(".sidebar-category-item").forEach(n=>{n.dataset.source===t&&(a.classList.remove("category-active"),n.classList.add("category-active"),n.scrollIntoView())});const o=await d.getSelectedCategory(t);S(o,t),window.scrollTo({top:0,behavior:"smooth"})}catch(t){console.log("Error fetching modal:",t)}}const y={categoryContainer:document.querySelector(".sidebar-category-container"),categoryList:document.querySelector(".sidebar-category-list"),allCategory:document.querySelector(".all-category")};function M(e){return e.map(a=>`<li class='sidebar-category-item' data-source="${a.list_name}">${a.list_name}</li>`).join("")}(async()=>{try{const e=await d.getCategoryList(),t=M(e);y.categoryList.insertAdjacentHTML("beforeend",t)}catch(e){console.log(e)}})();y.allCategory.addEventListener("click",async e=>{b();try{const t=await d.getBestSellers();w(t)}catch(t){console.log(t)}finally{p()}});y.categoryList.addEventListener("click",async e=>{if(e.target.classList.contains("sidebar-category-item")){const t=e.target.dataset.source;document.querySelectorAll(".sidebar-category-item").forEach(s=>{s.classList.remove("category-active")}),e.target.classList.add("category-active"),window.scrollTo({top:0,behavior:"smooth"});try{if(!e.target.classList.contains("all-category")){const s=await d.getSelectedCategory(t);s.length===0?q(`Sorry! There are no books available in the category "${t}".`):S(s,t)}}catch(s){console.log(s)}}});B();document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".scroll-up");e.classList.remove("show"),window.addEventListener("scroll",function(){window.scrollY>650?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})});function b(){document.querySelector(".loader-container").classList.remove("is-hidden")}function p(){const e=document.querySelector(".loader-container");setTimeout(()=>e.classList.add("is-hidden"),600)}
//# sourceMappingURL=commonHelpers2.js.map
