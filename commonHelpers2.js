import{b as d,l as g,r as k,a as L}from"./assets/api-24e14dfc.js";import"./assets/vendor-8dea2054.js";const u=async e=>{const o=document.querySelector(".modal-wrapper"),r=document.querySelector(".modal-icons-list"),a=document.querySelector(".modal-window");try{const t=await d.getBookDescription(e);o.innerHTML="",r.innerHTML="";const n=`
      <img class="modal-img-book" src="${t.book_image}" alt="book" />
      <ul class="modal-description-list">
      <li><p class="modal-description-list-title">${t.title}</p></li>
      <li><p class="modal-description-list-subtitle">${t.author}</p></li>
      <li>
        <p class="modal-description-list-text">
          ${t.description}
        </p>
      </li>
      </ul>`;if(o.insertAdjacentHTML("beforeend",n),t.description===""){const c=document.querySelector(".modal-description-list-text");c.textContent="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. "}const l=`<li>
        <a class="modal-icon amazon" href="${t.buy_links[0].url}"><img class='modal-icon' src="./img/amazon.png" alt="" width='62' height='19' 
       /></a>
      </li>
      <li>
        <a class="modal-icon" href="${t.buy_links[1].url}"><img class='modal-icon' src="./img/applebook.png" alt="" width='33' height='32'
       /></a>
      </li>`;r.insertAdjacentHTML("beforeend",l);let s=document.querySelector(".modal-btn-add");const m={_id:t._id,title:t.title,author:t.author,list_name:t.list_name,book_image:t.book_image,description:t.description,amazon_buy_link:t.buy_links[0].url,apple_buy_link:t.buy_links[1].url};if(g.isBookExsist(t._id)){let i=function(){g.removeBookFromFavorites(t._id),s.textContent="add to shopping list",s.classList.remove("modal-btn-remove"),s.removeEventListener("click",i),u(t._id)};s.textContent="remove from the shopping list";const c=`<p class="modal-text-congratulations">
      Ð¡ongratulations! You have added the book to the shopping list. To delete,
      press the button "Remove from the shopping list".
    </p>`;a.insertAdjacentHTML("beforeend",c),s.addEventListener("click",i)}else{let i=function(){g.addBookToFavorites(m),s.textContent="remove from the shopping list",s.classList.add("modal-btn-remove"),s.removeEventListener("click",i),u(t._id)};s.textContent="add to shopping list",s.addEventListener("click",i);const c=document.querySelector(".modal-text-congratulations");c!==null&&c.remove()}}catch(t){console.log("Error fetching modal:",t)}},h=document.querySelector(".backdrop"),w=document.querySelector(".modal-close"),f=document.querySelector("body");w.addEventListener("click",()=>{h.classList.remove("is-open"),f.classList.remove("no-scroll")});function v(){h.classList.add("is-open"),f.classList.add("no-scroll")}function S(e,o){b();try{const r=document.querySelector(".bestsellers-container");r.innerHTML="",k(".bestsellers-container",o),r.insertAdjacentHTML("beforeend",'<ul class = "book-category-list"></ul>');const a=document.querySelector(".book-category-list"),t=e.map(({author:n,book_image:l,title:s,_id:m})=>L({author:n,book_image:l,title:s,_id:m})).join("");a.innerHTML=t,a.addEventListener("click",C)}catch{console.log("Error fetching modal:",error)}finally{p()}}async function C(e){if(e.target.nodeName==="IMG"||e.target.nodeName==="H3"||e.target.nodeName==="P"){let o=e.target.closest(".book-category-item").dataset.id;u(o),v()}}async function B(){b();try{const e=await d.getBestSellers();q(e)}catch(e){console.error("Error fetching best sellers:",e)}finally{p()}}function q(e){const o=document.querySelector(".bestsellers-container");o.innerHTML="",k(".bestsellers-container","Best Sellers Books"),o.insertAdjacentHTML("beforeend",'<ul class="bestsellers-list"></ul>');const r=document.querySelector(".bestsellers-list"),a=e.map(({books:n,list_name:l})=>`<li class="bestsellers-item">
              <h2 class="bestsellers-category-title">${l}</h2>
              <ul class="bestsellers-books-list"> 
                ${n.map(({title:s,author:m,book_image:c,_id:i})=>L({title:s,author:m,book_image:c,_id:i})).join(`
`)}
              </ul>
              <button class="bestsellers-btn" type="button" data-category="${l}">See more</button>
            </li>`).join(`
`);r.insertAdjacentHTML("beforeend",a);const t=document.querySelector(".bestsellers-list");t.addEventListener("click",T),t.addEventListener("click",E)}async function E(e){if(e.preventDefault(),e.target.nodeName==="IMG"||e.target.nodeName==="H3"||e.target.nodeName==="P"){let o=e.target.closest(".book-category-item").dataset.id;u(o),v()}}async function T(e){try{if(e.target.nodeName!=="BUTTON")return;let o=e.target.dataset.category;const r=document.querySelector(".sidebar-category-item");document.querySelectorAll(".sidebar-category-item").forEach(n=>{n.dataset.source===o&&(r.classList.remove("category-active"),n.classList.add("category-active"))});const t=await d.getSelectedCategory(o);S(t,o)}catch(o){console.log("Error fetching modal:",o)}}const y={categoryContainer:document.querySelector(".sidebar-category-container"),categoryList:document.querySelector(".sidebar-category-list"),allCategory:document.querySelector(".all-category")};function _(e){return e.map(r=>`<li class='sidebar-category-item' data-source="${r.list_name}">${r.list_name}</li>`).join("")}(async()=>{try{const e=await d.getCategoryList(),o=_(e);y.categoryList.insertAdjacentHTML("beforeend",o)}catch(e){console.log(e)}})();y.allCategory.addEventListener("click",async e=>{b();try{const o=await d.getBestSellers();q(o)}catch(o){console.log(o)}finally{p()}});y.categoryList.addEventListener("click",async e=>{if(e.target.classList.contains("sidebar-category-item")){const o=e.target.dataset.source;document.querySelectorAll(".sidebar-category-item").forEach(a=>{a.classList.remove("category-active")}),e.target.classList.add("category-active");try{if(!e.target.classList.contains("all-category")){const a=await d.getSelectedCategory(o);S(a,o)}}catch(a){console.log(a)}}});B();document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".scroll-up");e.classList.remove("show"),window.addEventListener("scroll",function(){window.scrollY>650?e.classList.add("show"):e.classList.remove("show")}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})});function b(){document.querySelector(".loader-container").classList.remove("is-hidden")}function p(){const e=document.querySelector(".loader-container");setTimeout(()=>e.classList.add("is-hidden"),600)}
//# sourceMappingURL=commonHelpers2.js.map
