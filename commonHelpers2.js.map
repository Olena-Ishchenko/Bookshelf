{"version":3,"file":"commonHelpers2.js","sources":["../src/js/bestsellers.js","../src/js/categorypage.js","../src/js/sidebarallcategories.js","../src/js/modalwindow.js"],"sourcesContent":["import backendAPI from \"./Services/api\";\n\nexport const renderBestBooks = async () => {\n    const bestBooksList = document.querySelector('.bestsellers-list');\n    try {\n        const bestSellersData = await backendAPI.getBestSellers();\n        const markup = bestSellersData.map(({ books, list_name }) => {\n            return `<li class=\"bestsellers-item\">\n             <h2 class=\"bestsellers-category-title\">${list_name}</h2>\n                <ul class=\"bestsellers-books-list\"> \n                    ${books.map(({ book_image, title, author }) => { // if(){}else{}\n                        return `<li class=\"bestsellers-books-item\">\n                            <img class=\"bestsellers-books-img\" src='${book_image}' alt=\"\" />\n                            <h3 class=\"bestsellers-book-title\">${title}</h3>\n                            <p class=\"bestsellers-book-author\">${author}</p>\n                        </li>`}).join('\\n')}\n                </ul>\n                <button class=\"bestsellers-btn\" type=\"button\">See more</button>\n            </li>`;        \n        }).join('\\n');\n        \n        bestBooksList.insertAdjacentHTML('beforeend', markup);\n\n    } catch (error) {\n        console.error(\"Error fetching best sellers:\", error);\n    }\n}\n\nrenderBestBooks();\n\n// const handleSeeMoreClick = async (e) => {\n//     const category = e.target.getAttribute('data-category');\n\n//     const openCategory = await backendAPI.getSelectedCategory(category);\n\n\n//     const markupCategory = openCategory.map(({ books, list_name }) => {\n//       return `<li class=\"bestsellers-item\">\n//         <h2 class=\"bestsellers-category-title\">${list_name}</h2>\n//         <ul class=\"bestsellers-books-list\"> \n//           ${books.map(({ book_image, title, author }) => {\n//             return `<li class=\"bestsellers-books-item\">\n//                       <img class=\"bestsellers-books-img\" src='${book_image}' alt=\"\" />\n//                       <h3 class=\"bestsellers-book-title\">${title}</h3>\n//                       <p class=\"bestsellers-book-author\">${author}</p>\n//                     </li>`;\n//           }).join('\\n')}\n//         </ul>\n//         <button class=\"bestsellers-btn\" type=\"button\" data-category=\"${list_name}\">See more</button>\n//       </li>`;\n//     }).join('\\n');\n\n\n//     document.querySelector('.bestsellers-list').insertAdjacentHTML('beforeend', markupCategory);\n// };\n\n\n","import backendAPI from './Services/api';\n\nexport function renderCategoryPage(books, category) {\n  const categoryPage = document.querySelector('.bestsellers-list');\n  const categoryTitle = document.querySelector('.bestsellers-title');\n  categoryTitle.textContent = category;\n  const markup = books\n    .map(\n      ({ author, book_image, title }) => `<li class=\"book-category-item\">\n  <div class=\"book-category-card\">\n    <img class=\"book-category-image\" src=\"${book_image}\" alt=\"Book cover\" width=\"180\" />\n    <div class=\"book-category-text\">\n      <h3 class = \"book-title\">\n      ${title}</h3>\n      <p class = \"author-name\"> ${author}</p>\n    </div>\n  </div>\n</li>`\n    )\n    .join('');\n\n  categoryPage.innerHTML = markup;\n}\n\n// btn.addEventListener('click', async () => {\n//   const result = await backenadAPI.getSelectedCategory(\n//    category\n//   );\n//   renderCategoryPage(result, category);\n// });\n","import backendAPI from './Services/api';\nimport { renderBestBooks } from './bestsellers';\nimport { renderCategoryPage } from './categorypage';\n\nconst categorySelectors = {\n  categoryContainer: document.querySelector('.sidebar-category-container'),\n  categoryList: document.querySelector('.sidebar-category-list'),\n  allCategory: document.querySelector('.all-category'),\n};\n\n/**\n |============================\n | Розмітка списку категорій\n |============================\n*/\n\nfunction categoryMarkup(data) {\n  const result = data\n    .map(\n      item =>\n        `<li class='sidebar-category-item' data-source=\"${item.list_name}\">${item.list_name}</li>`\n    )\n    .join('');\n  return result;\n}\n\n(async () => {\n  try {\n    const categoryData = await backendAPI.getCategoryList();\n    const markup = categoryMarkup(categoryData);\n    categorySelectors.categoryList.insertAdjacentHTML('beforeend', markup);\n  } catch (error) {\n    console.log(error);\n  }\n})();\n\n/**\n |============================\n | Слухачі на all-category та на categoryList\n |============================\n*/\n\ncategorySelectors.allCategory.addEventListener('click', async () => {\n  try {\n    renderBestBooks('.bestsellers-container', 'Best Sellers');\n  } catch (error) {\n    console.log(error);\n  }\n});\n\ncategorySelectors.categoryList.addEventListener('click', async event => {\n  if (event.target.classList.contains('sidebar-category-item')) {\n    const category = event.target.dataset.source;\n\n    const categoryItems = document.querySelectorAll('.sidebar-category-item');\n    categoryItems.forEach(item => {\n      item.classList.remove('category-active');\n    });\n\n    event.target.classList.add('category-active');\n\n    try {\n      if (!event.target.classList.contains('all-category')) {\n        const categoryData = await backendAPI.getSelectedCategory(category);\n        renderCategoryPage(categoryData, category);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n});\n","// import backendAPI from './Services/api';\n// backendAPI.getBookDescription;\n\n// const renderModal = async () => {\n//   const backdrop = document.querySelector('.modal-description-list');\n//   try {\n//     const modalData = await backendAPI.getBookDescription(\n//       '643282b1e85766588626a0dc'\n//     );\n//     console.log(modalData);\n//     const markup = modalData\n//       .map(({ book_image, title, author, description }) => {\n//         return `\n//         <li><img class=\"modal-img-book\" src=\"${book_image}\" alt=\"book\" /></li>\n//       <li><p class=\"modal-description-list-title\">${title}</p></li>\n//       <li><p class=\"modal-description-list-subtitle\">${author}</p></li>\n//       <li>\n//         <p class=\"modal-description-list-text\">\n//           ${description}\n//         </p>\n//       </li>`;\n//       })\n//       .join('\\n');\n//     backdrop.insertAdjacentHTML('beforeend', markup);\n//   } catch (error) {\n//     console.log('Error fetching modal:', error);\n//   }\n// };\n// renderModal();\n// Рендер информации в модалку\nimport backendAPI from './Services/api';\nimport localStorageBooks from '../js/localstorage';\nconst bookId = '643282b2e85766588626a114';\nexport const renderModal = async bookId => {\n  const backdrop = document.querySelector('.modal-wrapper');\n  const links = document.querySelector('.modal-icons-list');\n  const modalWindow = document.querySelector('.modal-window');\n\n  try {\n    const modalData = await backendAPI.getBookDescription(bookId);\n    backdrop.innerHTML = '';\n    links.innerHTML = '';\n    const markupBooks = `\n      <img class=\"modal-img-book\" src=\"${modalData.book_image}\" alt=\"book\" />\n      <ul class=\"modal-description-list\">\n      <li><p class=\"modal-description-list-title\">${modalData.title}</p></li>\n      <li><p class=\"modal-description-list-subtitle\">${modalData.author}</p></li>\n      <li>\n        <p class=\"modal-description-list-text\">\n          ${modalData.description}\n        </p>\n      </li>\n      </ul>`;\n    backdrop.insertAdjacentHTML('beforeend', markupBooks);\n    console.log(markupBooks);\n    const murkupLinks = `<li class=\"modal-icons-wrapper-1\">\n        <a class=\"modal-icon\" href=\"${modalData.buy_links[0].url}\">amazon</a>\n      </li>\n      <li class=\"modal-icons-wrapper-2\">\n        <a class=\"modal-icon\" href=\"${modalData.buy_links[1].url}\">apple</a>\n      </li>`;\n    links.insertAdjacentHTML('beforeend', murkupLinks);\n    // Добавление в локал сторедж, смена кнопок и текста\n    let btnAdd = document.querySelector('.modal-btn-add');\n    const book = {\n      _id: modalData._id,\n      title: modalData.title,\n      author: modalData.author,\n      list_name: modalData.list_name,\n      book_image: modalData.book_image,\n      description: modalData.description,\n      amazon_buy_link: modalData.buy_links[0].url,\n      apple_buy_link: modalData.buy_links[1].url,\n    };\n    console.log(modalData._id);\n    if (localStorageBooks.isBookExsist(modalData._id)) {\n      btnAdd.textContent = 'remove from the shopping list';\n      const congrats = `<p class=\"modal-text-congratulations\">\n      Сongratulations! You have added the book to the shopping list. To delete,\n      press the button \"Remove from the shopping list\".\n    </p>`;\n      modalWindow.insertAdjacentHTML('beforeend', congrats);\n      btnAdd.addEventListener('click', remove);\n      function remove() {\n        localStorageBooks.removeBookFromFavorites(modalData._id);\n        btnAdd.textContent = 'add to shopping list';\n        btnAdd.classList.remove('modal-btn-remove');\n        btnAdd.removeEventListener('click', remove);\n        renderModal(modalData._id);\n      }\n    } else {\n      btnAdd.textContent = 'add to shopping list';\n      btnAdd.addEventListener('click', add);\n      const congratsRemove = document.querySelector(\n        '.modal-text-congratulations'\n      );\n      congratsRemove.remove();\n      function add() {\n        localStorageBooks.addBookToFavorites(book);\n        btnAdd.textContent = 'remove from the shopping list';\n        btnAdd.classList.add('modal-btn-remove');\n        btnAdd.removeEventListener('click', add);\n\n        renderModal(modalData._id);\n      }\n    }\n\n    console.log(murkupLinks);\n  } catch (error) {\n    console.log('Error fetching modal:', error);\n  }\n};\nrenderModal(bookId);\n\n/////////////////////////////////////////////////////////////////////////////////\n// Закрывание окна\nconst backdrop = document.querySelector('.backdrop');\nconst btnClose = document.querySelector('.modal-close');\n\nbtnClose.addEventListener('click', () => {\n  backdrop.classList.remove('is-open');\n});\n/////////////////////////////////////////////////////////////////////////////////\n\n// function showModal() {\n//   backdrop.classList.add('.is-open');\n// }\n\n// showModal();\n"],"names":["renderBestBooks","bestBooksList","markup","backendAPI","books","list_name","book_image","title","author","error","renderCategoryPage","category","categoryPage","categoryTitle","categorySelectors","categoryMarkup","data","item","categoryData","event","bookId","renderModal","backdrop","links","modalWindow","modalData","markupBooks","murkupLinks","btnAdd","book","localStorageBooks","remove","congrats","add","btnClose"],"mappings":"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"}