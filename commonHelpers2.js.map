{"version":3,"file":"commonHelpers2.js","sources":["../src/js/modalwindow.js","../src/js/categorypage.js","../src/js/bestsellers.js","../src/js/sidebarallcategories.js","../src/main.js"],"sourcesContent":["// Рендер информации в модалку\nimport backendAPI from './Services/api';\nimport localStorageBooks from '../js/localstorage';\nexport const renderModal = async bookId => {\n  const backdrop = document.querySelector('.modal-wrapper');\n  const links = document.querySelector('.modal-icons-list');\n  const modalWindow = document.querySelector('.modal-window');\n\n  try {\n    const modalData = await backendAPI.getBookDescription(bookId);\n    backdrop.innerHTML = '';\n    links.innerHTML = '';\n    const markupBooks = `\n      <img class=\"modal-img-book\" src=\"${modalData.book_image}\" alt=\"book\" />\n      <ul class=\"modal-description-list\">\n      <li><p class=\"modal-description-list-title\">${modalData.title}</p></li>\n      <li><p class=\"modal-description-list-subtitle\">${modalData.author}</p></li>\n      <li>\n        <p class=\"modal-description-list-text\">\n          ${modalData.description}\n        </p>\n      </li>\n      </ul>`;\n    backdrop.insertAdjacentHTML('beforeend', markupBooks);\n    const murkupLinks = `<li class=\"modal-icons-wrapper-1\">\n        <a class=\"modal-icon\" href=\"${modalData.buy_links[0].url}\"><img class='modal-icon' src=\"../img/amazon.png\" alt=\"\" width='62' height='19' \n       /></a>\n      </li>\n      <li class=\"modal-icons-wrapper-2\">\n        <a class=\"modal-icon\" href=\"${modalData.buy_links[1].url}\"><img class='modal-icon' src=\"../img/applebook.png\" alt=\"\" width='33' height='32'\n       /></a>\n      </li>`;\n    links.insertAdjacentHTML('beforeend', murkupLinks);\n    // Добавление в локал сторедж, смена кнопок и текста\n    let btnAdd = document.querySelector('.modal-btn-add');\n    const book = {\n      _id: modalData._id,\n      title: modalData.title,\n      author: modalData.author,\n      list_name: modalData.list_name,\n      book_image: modalData.book_image,\n      description: modalData.description,\n      amazon_buy_link: modalData.buy_links[0].url,\n      apple_buy_link: modalData.buy_links[1].url,\n    };\n    if (localStorageBooks.isBookExsist(modalData._id)) {\n      btnAdd.textContent = 'remove from the shopping list';\n      const congrats = `<p class=\"modal-text-congratulations\">\n      Сongratulations! You have added the book to the shopping list. To delete,\n      press the button \"Remove from the shopping list\".\n    </p>`;\n      modalWindow.insertAdjacentHTML('beforeend', congrats);\n      btnAdd.addEventListener('click', remove);\n      function remove() {\n        localStorageBooks.removeBookFromFavorites(modalData._id);\n        btnAdd.textContent = 'add to shopping list';\n        btnAdd.classList.remove('modal-btn-remove');\n        btnAdd.removeEventListener('click', remove);\n        renderModal(modalData._id);\n      }\n    } else {\n      btnAdd.textContent = 'add to shopping list';\n      btnAdd.addEventListener('click', add);\n      const congratsRemove = document.querySelector(\n        '.modal-text-congratulations'\n      );\n      if (congratsRemove !== null) {\n        congratsRemove.remove();\n      }\n      function add() {\n        localStorageBooks.addBookToFavorites(book);\n        btnAdd.textContent = 'remove from the shopping list';\n        btnAdd.classList.add('modal-btn-remove');\n        btnAdd.removeEventListener('click', add);\n\n        renderModal(modalData._id);\n      }\n    }\n  } catch (error) {\n    console.log('Error fetching modal:', error);\n  }\n};\n// renderModal(bookId);\n/////////////////////////////////////////////////////////////////////////////////\n\n// Закрывание окна\nconst backdrop = document.querySelector('.backdrop');\nconst btnClose = document.querySelector('.modal-close');\nconst body = document.querySelector('body');\n\nbtnClose.addEventListener('click', () => {\n  backdrop.classList.remove('is-open');\n  body.classList.remove('no-scroll');\n});\n/////////////////////////////////////////////////////////////////////////////////\n//Открытие окна\nexport function showModal() {\n  backdrop.classList.add('is-open');\n  body.classList.add('no-scroll');\n}\n// showModal();\n\n/////////////////////////////////////////////////////////////////////////////////\n","import backendAPI from './Services/api';\nimport { renderTitle, bookTemplate } from './Services/helpers';\nimport { renderModal, showModal } from './modalwindow';\n\nexport function renderCategoryPage(books, category) {\n  const pageContainer = document.querySelector('.bestsellers-container');\n  pageContainer.innerHTML = '';\n  renderTitle('.bestsellers-container', category);\n  pageContainer.insertAdjacentHTML(\n    'beforeend',\n    '<ul class = \"book-category-list\"></ul>'\n  );\n  const categoryPage = document.querySelector('.book-category-list');\n  const markup = books\n    .map(({ author, book_image, title, _id }) => {\n      return bookTemplate({ author, book_image, title, _id });\n    })\n    .join('');\n\n  categoryPage.innerHTML = markup;\n  categoryPage.addEventListener('click', onClickBook);\n}\n\nasync function onClickBook(e) {\n  if (\n    e.target.nodeName === 'IMG' ||\n    e.target.nodeName === 'H3' ||\n    e.target.nodeName === 'P'\n  ) {\n    let bookId = e.target.closest('.book-category-item').dataset.id;\n    renderModal(bookId);\n    showModal();\n  }\n}\n// btn.addEventListener('click', async () => {\n//   const result = await backenadAPI.getSelectedCategory(\n//    category\n//   );\n//   renderCategoryPage(result, category);\n// });\n","import backendAPI from \"./Services/api\";\nimport { bookTemplate, renderTitle } from \"./Services/helpers\";\nimport { renderCategoryPage } from \"./categorypage\";\nimport { renderModal } from \"./modalwindow\";\n\n// ==================================================================================\n// Функція для відображення Best Sellers Books\n// ==============================================================================\n\nexport async function topPageBestsellersBooks() {\n  try {\n    const bestSellersData = await backendAPI.getBestSellers();\n    renderBestBooks(bestSellersData);\n  } catch (error) {\n    console.error(\"Error fetching best sellers:\", error);\n  }\n}\n\n// ==================================================================================================\n// Рендер сторінки\n// ======================================================================================================\n\nexport function renderBestBooks(bestBooks) {\n  const bestBooksContainer = document.querySelector('.bestsellers-container');\n  bestBooksContainer.innerHTML = '';\n  renderTitle('.bestsellers-container', 'Best Sellers Books');\n  bestBooksContainer.insertAdjacentHTML('beforeend', `<ul class=\"bestsellers-list\"></ul>`);\n  const bestBooksList = document.querySelector('.bestsellers-list');\n  \n  const markup = bestBooks.map(({ books, list_name }) => {\n    return `<li class=\"bestsellers-item\">\n              <h2 class=\"bestsellers-category-title\">${list_name}</h2>\n              <ul class=\"bestsellers-books-list\"> \n                ${books.map(({ title, author, book_image, _id }) => {return bookTemplate({ title, author, book_image, _id })\n                  }).join('\\n')}\n              </ul>\n              <button class=\"bestsellers-btn\" type=\"button\" data-category=\"${list_name}\">See more</button>\n            </li>`;        \n        }).join('\\n');\n\n  bestBooksList.insertAdjacentHTML('beforeend', markup);\n\n  const bestsellersList = document.querySelector('.bestsellers-list');\n  bestsellersList.addEventListener('click', onButtonClick);\n  bestsellersList.addEventListener('click', onImageClick);  \n}\n\n// =======================================================================\n// Слухач для модалки\n// =======================================================================\n\nasync function onImageClick(e) {\n  e.preventDefault();\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n  let bookId = e.target.dataset.book;\n  console.log(bookId);\n \n  renderModal(bookId);\n}\n\n// ========================================================================\n// Слухач на кнопку\n// ======================================================================== \n\nasync function onButtonClick(e) {\n  \n  if (e.target.nodeName !== 'BUTTON') {\n    return;\n  }\n  \n  let category = e.target.dataset.category;\n  const openCategory = await backendAPI.getSelectedCategory(category);\n  renderCategoryPage(openCategory, category);\n};\n\n","import backendAPI from './Services/api';\nimport { renderBestBooks } from './bestsellers';\nimport { renderCategoryPage } from './categorypage';\n\nconst categorySelectors = {\n  categoryContainer: document.querySelector('.sidebar-category-container'),\n  categoryList: document.querySelector('.sidebar-category-list'),\n  allCategory: document.querySelector('.all-category'),\n};\n\n/**\n |============================\n | Розмітка списку категорій\n |============================\n*/\n\nfunction categoryMarkup(data) {\n  const result = data\n    .map(\n      item =>\n        `<li class='sidebar-category-item' data-source=\"${item.list_name}\">${item.list_name}</li>`\n    )\n    .join('');\n  return result;\n}\n\n(async () => {\n  try {\n    const categoryData = await backendAPI.getCategoryList();\n    const markup = categoryMarkup(categoryData);\n    categorySelectors.categoryList.insertAdjacentHTML('beforeend', markup);\n  } catch (error) {\n    console.log(error);\n  }\n})();\n\n/**\n |============================\n | Слухачі подій\n |============================\n*/\n\ncategorySelectors.allCategory.addEventListener('click', async event => {\n  try {\n    const bestBooksData = await backendAPI.getBestSellers();\n    renderBestBooks(bestBooksData);\n  } catch (error) {\n    console.log(error);\n  }\n});\n\ncategorySelectors.categoryList.addEventListener('click', async event => {\n  if (event.target.classList.contains('sidebar-category-item')) {\n    const category = event.target.dataset.source;\n\n    const categoryItems = document.querySelectorAll('.sidebar-category-item');\n    categoryItems.forEach(item => {\n      item.classList.remove('category-active');\n    });\n\n    event.target.classList.add('category-active');\n\n    try {\n      if (!event.target.classList.contains('all-category')) {\n        const categoryData = await backendAPI.getSelectedCategory(category);\n        renderCategoryPage(categoryData, category);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n});\n","\nimport './js/header';\nimport './js/bestsellers';\nimport './js/categorypage';\nimport './js/sidebarallcategories';\nimport './js/support';\nimport './js/Services/api';\nimport './js/Services/helpers';\nimport './js/signup';\nimport './js/signupmarkup' \nimport './js/modalwindow' \nimport './js/localstorage'\nimport { topPageBestsellersBooks } from './js/bestsellers';\n\ntopPageBestsellersBooks();"],"names":["renderModal","bookId","backdrop","links","modalWindow","modalData","backendAPI","markupBooks","murkupLinks","btnAdd","book","localStorageBooks","remove","congrats","add","congratsRemove","error","btnClose","body","showModal","renderCategoryPage","books","category","pageContainer","renderTitle","categoryPage","markup","author","book_image","title","_id","bookTemplate","onClickBook","topPageBestsellersBooks","bestSellersData","renderBestBooks","bestBooks","bestBooksContainer","bestBooksList","list_name","bestsellersList","onButtonClick","onImageClick","openCategory","categorySelectors","categoryMarkup","data","item","categoryData","event","bestBooksData"],"mappings":"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"}